{"version":3,"file":"default-ngx-vcard_fesm2015_ngx-vcard_js.js","mappings":"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","sources":["../projects/ngx-vcard/src/lib/types/vCardEncoding.ts","../projects/ngx-vcard/src/lib/helpers.ts","../projects/ngx-vcard/src/lib/types/parameter/BasicPropertyParameters.type.ts","../projects/ngx-vcard/src/lib/ngx-vcard.formatter.ts","../projects/ngx-vcard/src/lib/download-vcard.directive.ts","../projects/ngx-vcard/src/lib/ngx-vcard.module.ts","../projects/ngx-vcard/src/public_api.ts","../projects/ngx-vcard/src/ngx-vcard.ts"],"sourcesContent":["export enum VCardEncoding {\n  none = '',\n  utf8 = ';CHARSET=utf-8'\n}\n","/**\n * Encodes string\n */\nexport function e(value: string | undefined): string {\n  if (value) {\n    if (typeof value !== 'string') {\n      value = '' + value;\n    }\n    return value\n      .replace(/\\n/g, '\\n')\n      .replace(/,/g, ',')\n      .replace(/;/g, ';');\n  }\n  return '';\n}\n\n/**\n * Return new line characters\n */\nexport function nl(): string {\n  return '\\n';\n}\n","import { Address } from '../vCard';\nimport { e } from '../../helpers';\n\n/**\n * A property can have attributes associated with it.\n * These \"property parameters\" contain meta-information about the property or the property value.\n * @link https://tools.ietf.org/html/rfc6350#section-5\n */\nexport interface BasicPropertyParameters {\n  /**\n   * The LANGUAGE property parameter is used to identify data in multiple languages.\n   * @kind Property: LANGUAGE\n   * @link https://tools.ietf.org/html/rfc6350#section-5.1\n   *\n   */\n  language?: string;\n  /**\n   * The VALUE parameter is OPTIONAL, used to identify the value type (data type) and format of the value.\n   * @kind Property: VALUE\n   * @link https://tools.ietf.org/html/rfc6350#section-5.2\n   */\n  value?:\n    | 'text'\n    | 'uri'\n    | 'date'\n    | 'time'\n    | 'date-time'\n    | 'date-and-or-time'\n    | 'timestamp'\n    | 'boolean'\n    | 'integer'\n    | 'float'\n    | 'utc-offset'\n    | 'language-tag';\n  /**\n   * The PREF parameter is OPTIONAL and is used to indicate that the corresponding instance of a property is preferred by the vCard author.\n   * Its value MUST be an integer between 1 and 100 that quantifies the level of preference.\n   * Lower values correspond to a higher level of preference, with 1 being most preferred.\n   * @kind Property: PREF\n   * @link https://tools.ietf.org/html/rfc6350#section-5.3\n   */\n  pref?:\n    | 1\n    | 2\n    | 3\n    | 4\n    | 5\n    | 6\n    | 7\n    | 8\n    | 9\n    | 10\n    | 11\n    | 12\n    | 13\n    | 14\n    | 15\n    | 16\n    | 17\n    | 18\n    | 19\n    | 20\n    | 21\n    | 22\n    | 23\n    | 24\n    | 25\n    | 26\n    | 27\n    | 28\n    | 29\n    | 30\n    | 31\n    | 32\n    | 33\n    | 34\n    | 35\n    | 36\n    | 37\n    | 38\n    | 39\n    | 40\n    | 41\n    | 42\n    | 43\n    | 44\n    | 45\n    | 46\n    | 47\n    | 48\n    | 49\n    | 50\n    | 51\n    | 52\n    | 53\n    | 54\n    | 55\n    | 56\n    | 57\n    | 58\n    | 59\n    | 60\n    | 61\n    | 62\n    | 63\n    | 64\n    | 65\n    | 66\n    | 67\n    | 68\n    | 69\n    | 70\n    | 71\n    | 72\n    | 73\n    | 74\n    | 75\n    | 76\n    | 77\n    | 78\n    | 79\n    | 80\n    | 81\n    | 82\n    | 83\n    | 84\n    | 85\n    | 86\n    | 87\n    | 88\n    | 89\n    | 90\n    | 91\n    | 92\n    | 93\n    | 94\n    | 95\n    | 96\n    | 97\n    | 98\n    | 99\n    | 100;\n  /**\n   * The ALTID parameter is used to \"tag\" property instances as being alternative representations of the same logical property.\n   * For example, translations of a property in multiple languages generates multiple property instances\n   * having different LANGUAGE parameter that are tagged with the same ALTID value.\n   * @kind Property: ALTID\n   * @link https://tools.ietf.org/html/rfc6350#section-5.4\n   */\n  altid?: string;\n  /**\n   * The PID parameter is used to identify a specific property among multiple instances.\n   * @kind Property: PID\n   * @link https://tools.ietf.org/html/rfc6350#section-5.5\n   */\n  pid?: string[];\n  /**\n   * The TYPE parameter has multiple, different uses.\n   * In general, it is a way of specifying class characteristics of the associated property.\n   * @kind Property: TYPE\n   * @link https://tools.ietf.org/html/rfc6350#section-5.6\n   */\n  type?:\n    | Array<'work' | 'home' | 'text' | 'voice' | 'fax' | 'cell' | 'video' | 'pager' | 'textphone'>\n    | 'work'\n    | 'home'\n    | 'text'\n    | 'voice'\n    | 'fax'\n    | 'cell'\n    | 'video'\n    | 'pager'\n    | 'textphone';\n  /**\n   * The MEDIATYPE parameter is used with properties whose value is a URI.\n   * @kind Property: MEDIATYPE\n   * @link https://tools.ietf.org/html/rfc6350#section-5.7\n   */\n  mediatype?: string;\n  /**\n   * The CALSCALE parameter is used to define the calendar system in which a date or date-time value is expressed.\n   * @kind Property: CALSCALE\n   * @link https://tools.ietf.org/html/rfc6350#section-5.8\n   */\n  calscale?: 'gregorian';\n  /**\n   * The \"sort-as\" parameter is used to specify the string to be used for national-language-specific sorting.\n   * Without this information, sorting algorithms could incorrectly sort this vCard within a sequence of sorted vCards.\n   * @kind Property: SORT-AS\n   * @link https://tools.ietf.org/html/rfc6350#section-5.9\n   */\n  sortas?: string[];\n  /**\n   * The GEO parameter can be used to indicate global positioning information that is specific to an address.\n   * @kind Property: GEO\n   * @link https://tools.ietf.org/html/rfc6350#section-5.10\n   */\n  geo?: string;\n  /**\n   * The TZ parameter can be used to indicate time zone information that is specific to an address.\n   * @kind Property: TZ\n   * @link https://tools.ietf.org/html/rfc6350#section-5.11\n   */\n  timezone?: string;\n}\n\nexport function propertyToVCardString(property: BasicPropertyParameters): string {\n  let str = '';\n  if (property.language) {\n    str += ';LANGUAGE=' + e(property.language);\n  }\n  if (property.value) {\n    str += ';VALUE=' + e(property.value);\n  }\n  if (property.altid) {\n    str += ';ALTID=' + e(property.altid);\n  }\n  if (property.pid) {\n    str += ';PID=' + property.pid.map(s => e(s)).join(',');\n  }\n  if (property.type) {\n    if (Array.isArray(property.type)) {\n      if (property.type.length === 1) {\n        str += ';TYPE=' + property.type[0];\n      } else {\n        str += ';TYPE=\"' + property.type.map(s => s.toLowerCase()).join(',') + '\"';\n      }\n    } else {\n      str += ';TYPE=' + property.type;\n    }\n  }\n  if (property.mediatype) {\n    str += ';MEDIATYPE=' + e(property.mediatype);\n  }\n  if (property.pref) {\n    str += ';PREF=' + property.pref;\n  }\n  if (property.calscale) {\n    str += ';CALSCALE=' + e(property.calscale);\n  }\n  if (property.sortas) {\n    str += ';SORT-AS=\"' + property.sortas.map(s => e(s)).join(',') + '\"';\n  }\n  if (property.geo) {\n    str += ';GEO=' + e(property.geo);\n  }\n  if (property.timezone) {\n    str += ';TZ=' + e(property.timezone);\n  }\n\n  return str;\n}\n\nexport function isPropertyWithParameters(object: any): object is { value?: string; param?: BasicPropertyParameters } {\n  const test = <{ value?: string; param?: BasicPropertyParameters }>object;\n  if (test == null || test.param == null || test.value == null) {\n    return false;\n  }\n  return (\n    test.param.language !== undefined ||\n    test.param.value !== undefined ||\n    test.param.pref !== undefined ||\n    test.param.altid !== undefined ||\n    test.param.pid !== undefined ||\n    test.param.type !== undefined ||\n    test.param.mediatype !== undefined ||\n    test.param.calscale !== undefined ||\n    test.param.sortas !== undefined ||\n    test.param.geo !== undefined ||\n    test.param.timezone !== undefined\n  );\n}\n\nexport function isPropertyWithParametersAddressValue(\n  object: any\n): object is { value?: Address; param?: BasicPropertyParameters } {\n  const test = <{ value?: Address; param?: BasicPropertyParameters }>object;\n  if (test == null || test.param == null || test.value == null) {\n    return false;\n  }\n  return (\n    test.param.language !== undefined ||\n    test.param.value !== undefined ||\n    test.param.pref !== undefined ||\n    test.param.altid !== undefined ||\n    test.param.pid !== undefined ||\n    test.param.type !== undefined ||\n    test.param.mediatype !== undefined ||\n    test.param.calscale !== undefined ||\n    test.param.sortas !== undefined ||\n    test.param.geo !== undefined ||\n    test.param.timezone !== undefined\n  );\n}\n","import { VCard, Address } from './types/vCard';\nimport { VCardEncoding } from './types/vCardEncoding';\nimport {\n  isPropertyWithParameters,\n  propertyToVCardString,\n  BasicPropertyParameters,\n  isPropertyWithParametersAddressValue,\n} from './types/parameter/BasicPropertyParameters.type';\nimport { nl, e } from './helpers';\n\nexport class VCardFormatter {\n  public static getVCardAsBlob(vCard: VCard, encoding: VCardEncoding = VCardEncoding.none): Blob {\n    const data = VCardFormatter.getVCardAsString(vCard, encoding);\n    return new Blob([data], { type: 'text/vcard' });\n  }\n\n  /**\n   * Get formatted vCard in VCF format\n   */\n  public static getVCardAsString(vCard: VCard, encodingPrefix: VCardEncoding = VCardEncoding.none): string {\n    if (!vCard.version) {\n      vCard.version = '4.0';\n    }\n    const majorVersion = getMajorVersion(vCard.version);\n\n    let formattedVCardString = '';\n    formattedVCardString += 'BEGIN:VCARD' + nl();\n    formattedVCardString += 'VERSION:' + vCard.version + nl();\n\n    // const encodingPrefix = '';\n    let formattedName = '';\n    if (vCard.name == null) {\n      vCard.name = {};\n    }\n\n    let nameArray = [];\n    if (vCard.formattedName != null) {\n      nameArray = [vCard.formattedName.firstNames, vCard.formattedName.addtionalNames, vCard.formattedName.lastNames];\n    } else {\n      nameArray = [vCard.name.firstNames, vCard.name.addtionalNames, vCard.name.lastNames];\n    }\n\n    formattedName = nameArray.filter((string) => string != null).join(' ');\n\n    formattedVCardString += 'FN' + encodingPrefix + ':' + e(formattedName) + nl();\n\n    formattedVCardString +=\n      'N' +\n      encodingPrefix +\n      ':' +\n      [\n        e(vCard.name.lastNames),\n        e(vCard.name.firstNames),\n        e(vCard.name.addtionalNames),\n        e(vCard.name.namePrefix),\n        e(vCard.name.nameSuffix),\n      ].join(';') +\n      nl();\n\n    if (vCard.nickname && majorVersion >= 3) {\n      formattedVCardString += 'NICKNAME' + encodingPrefix + ':' + e(vCard.nickname) + nl();\n    }\n\n    if (vCard.gender) {\n      if (vCard.gender.sex) {\n        formattedVCardString += 'GENDER:' + e(vCard.gender.sex);\n        if (vCard.gender.text) {\n          formattedVCardString += ';' + e(vCard.gender.text);\n        }\n        formattedVCardString += nl();\n      } else {\n        formattedVCardString += 'GENDER:;' + e(vCard.gender.text) + nl();\n      }\n    }\n\n    if (vCard.uid) {\n      formattedVCardString += 'UID' + encodingPrefix + ':' + e(vCard.uid) + nl();\n    }\n\n    if (vCard.birthday) {\n      formattedVCardString += 'BDAY:' + YYYYMMDD(vCard.birthday) + nl();\n    }\n\n    if (vCard.anniversary) {\n      formattedVCardString += 'ANNIVERSARY:' + YYYYMMDD(vCard.anniversary) + nl();\n    }\n\n    if (vCard.language) {\n      vCard.language.forEach((language) => {\n        if (isPropertyWithParameters(language)) {\n          formattedVCardString += 'LANG' + propertyToVCardString(language.param) + ':' + e(language.value) + nl();\n        } else {\n          formattedVCardString += 'LANG:' + e(language) + nl();\n        }\n      });\n    }\n\n    if (vCard.organization) {\n      if (isPropertyWithParameters(vCard.organization)) {\n        formattedVCardString +=\n          'ORG' + propertyToVCardString(vCard.organization.param) + ':' + e(vCard.organization.value) + nl();\n      } else {\n        formattedVCardString += 'ORG' + encodingPrefix + ':' + e(vCard.organization) + nl();\n      }\n    }\n\n    if (vCard.address) {\n      vCard.address.forEach((address) => {\n        if (isPropertyWithParametersAddressValue(address)) {\n          formattedVCardString +=\n            'ADR' +\n            propertyToVCardString(address.param as BasicPropertyParameters) +\n            getFormattedAddress(address.value) +\n            nl();\n        } else {\n          formattedVCardString += 'ADR' + getFormattedAddress(address) + nl();\n        }\n      });\n    }\n\n    if (vCard.telephone) {\n      vCard.telephone.forEach((element) => {\n        if (!isPropertyWithParameters(element)) {\n          element = {\n            value: element,\n            param: {\n              type: 'voice',\n            },\n          };\n        }\n        formattedVCardString +=\n          'TEL' + propertyToVCardString(element.param as BasicPropertyParameters) + ':' + e(element.value) + nl();\n      });\n    }\n\n    if (vCard.email) {\n      vCard.email.forEach((email) => {\n        if (isPropertyWithParameters(email)) {\n          formattedVCardString += 'EMAIL' + propertyToVCardString(email.param) + ':' + e(email.value) + nl();\n        } else {\n          formattedVCardString += 'EMAIL:' + e(email) + nl();\n        }\n      });\n    }\n\n    if (vCard.title) {\n      formattedVCardString += 'TITLE' + encodingPrefix + ':' + e(vCard.title) + nl();\n    }\n\n    if (vCard.logo) {\n      if (isPropertyWithParameters(vCard.logo)) {\n        formattedVCardString += 'LOGO' + propertyToVCardString(vCard.logo.param) + ':' + e(vCard.logo.value) + nl();\n      } else {\n        formattedVCardString += 'LOGO:' + e(vCard.logo) + nl();\n      }\n    }\n\n    if (vCard.photo) {\n      if (isPropertyWithParameters(vCard.photo)) {\n        formattedVCardString += 'PHOTO' + propertyToVCardString(vCard.photo.param) + ';' + e(vCard.photo.value) + nl();\n      } else {\n        formattedVCardString += 'PHOTO;' + e(vCard.photo) + nl();\n      }\n    }\n\n    if (vCard.homeFax) {\n      vCard.homeFax.forEach(function (number) {\n        if (+majorVersion >= 4) {\n          formattedVCardString += 'TEL;VALUE=uri;TYPE=\"fax,home\":tel:' + e(number) + nl();\n        } else {\n          formattedVCardString += 'TEL;TYPE=HOME,FAX:' + e(number) + nl();\n        }\n      });\n    }\n\n    if (vCard.workFax) {\n      vCard.workFax.forEach(function (number) {\n        if (+majorVersion >= 4) {\n          formattedVCardString += 'TEL;VALUE=uri;TYPE=\"fax,work\":tel:' + e(number) + nl();\n        } else {\n          formattedVCardString += 'TEL;TYPE=WORK,FAX:' + e(number) + nl();\n        }\n      });\n    }\n\n    if (vCard.role) {\n      formattedVCardString += 'ROLE' + encodingPrefix + ':' + e(vCard.role) + nl();\n    }\n\n    if (vCard.url) {\n      let urlNotSet = true;\n      if (hasProp(vCard.url, 'home')) {\n        formattedVCardString += 'URL;type=HOME' + encodingPrefix + ':' + e((vCard.url as { home: string }).home) + nl();\n        urlNotSet = false;\n      }\n\n      if (hasProp(vCard.url, 'work')) {\n        formattedVCardString += 'URL;type=WORK' + encodingPrefix + ':' + e((vCard.url as { work: string }).work) + nl();\n        urlNotSet = false;\n      }\n      if (urlNotSet) {\n        formattedVCardString += 'URL' + encodingPrefix + ':' + e(vCard.url as string) + nl();\n      }\n    }\n\n    if (vCard.note) {\n      formattedVCardString += 'NOTE' + encodingPrefix + ':' + e(vCard.note) + nl();\n    }\n\n    if (vCard.socialUrls) {\n      for (const key in vCard.socialUrls) {\n        if (vCard.socialUrls.hasOwnProperty(key) && vCard.socialUrls[key]) {\n          formattedVCardString +=\n            'X-SOCIALPROFILE' + encodingPrefix + ';TYPE=' + key + ':' + e(vCard.socialUrls[key]) + nl();\n        }\n      }\n    }\n\n    if (vCard.source) {\n      if (isPropertyWithParameters(vCard.source)) {\n        formattedVCardString +=\n          'SOURCE' + encodingPrefix + propertyToVCardString(vCard.source.param) + ':' + e(vCard.source.value) + +nl();\n      } else {\n        formattedVCardString += 'SOURCE' + encodingPrefix + ':' + e(vCard.source) + nl();\n      }\n    }\n    if (vCard.rev) {\n      formattedVCardString += 'REV:' + vCard.rev + nl();\n    }\n    formattedVCardString += 'END:VCARD' + nl();\n    return formattedVCardString;\n  }\n}\n\n/**\n * Get formatted photo\n * @param photoType       Photo type (PHOTO, LOGO)\n * @param url             URL to attach photo from\n * @param mediaType       Media-type of photo (JPEG, PNG, GIF)\n */\nfunction getFormattedPhoto(\n  photoType: 'PHOTO' | 'LOGO',\n  url: string,\n  mediaType: string,\n  base64: boolean,\n  majorVersion: number\n) {\n  let params;\n\n  if (+majorVersion >= 4) {\n    params = base64 ? ';ENCODING=b;MEDIATYPE=image/' : ';MEDIATYPE=image/';\n  } else if (+majorVersion === 3) {\n    params = base64 ? ';ENCODING=b;TYPE=' : ';TYPE=';\n  } else {\n    params = base64 ? ';ENCODING=BASE64;' : ';';\n  }\n\n  const formattedPhoto = photoType + params + mediaType + ':' + e(url) + nl();\n  return formattedPhoto;\n}\n\n/**\n * Get formatted address\n */\nfunction getFormattedAddress(address: Address) {\n  return (\n    (address.label ? ';LABEL=\"' + e(address.label) + '\"' : '') +\n    ':' +\n    e(address.postOfficeBox) +\n    ';' +\n    e(address.extendedAddress) +\n    ';' +\n    e(address.street) +\n    ';' +\n    e(address.locality) +\n    ';' +\n    e(address.region) +\n    ';' +\n    e(address.postalCode) +\n    ';' +\n    e(address.countryName)\n  );\n}\n\n/**\n * Convert date to YYYYMMDD format\n */\nfunction YYYYMMDD(date: Date | undefined): string {\n  if (!date) {\n    return '';\n  }\n  return date.toLocaleDateString('se').replace(/\\D/g, ''); // use Swedish date format\n}\n\n/**\n * Get major version from version string\n */\nexport function getMajorVersion(version: string): number {\n  const majorVersionString = version ? version.slice(0, 1) : '4';\n  if (!isNaN(+majorVersionString)) {\n    return Number.parseInt(majorVersionString);\n  }\n  return 4;\n}\n\n/**\n * Determines if the object has the Property\n * @param obj Object to test\n * @param property Property to check\n */\nfunction hasProp(obj: any, property: string): boolean {\n  return Object.prototype.hasOwnProperty.call(obj, property);\n}\n","import { Directive, ElementRef, HostListener, Input } from '@angular/core';\nimport { VCardFormatter } from './ngx-vcard.formatter';\nimport { VCard } from './types/vCard';\nimport { VCardEncoding } from './types/vCardEncoding';\n\nconst ERROR_MESSAGE =\n  \"ngx-vcard: No input specified. You must specify either 'vcdDownloadVCard' or 'generateVCardFunction'\";\n@Directive({\n  selector: '[vcdDownloadVCard]',\n})\nexport class DownloadVCardDirective {\n  constructor(private element: ElementRef) {}\n  // This property is always specified as it is the selector,\n  // which means it can't be undefined\n  @Input('vcdDownloadVCard')\n  vCard!: VCard | '';\n  @Input('generateVCardFunction')\n  generateVCardFunction: (() => VCard) | '' | undefined;\n  @Input() public encoding: VCardEncoding = VCardEncoding.none;\n\n  @HostListener('click')\n  onclick() {\n    if (this.vCard == '') {\n      if (\n        this.generateVCardFunction != undefined &&\n        this.generateVCardFunction != ''\n      ) {\n        this.vCard = this.generateVCardFunction();\n      } else {\n        throw new Error(ERROR_MESSAGE);\n      }\n    }\n    const blob = VCardFormatter.getVCardAsBlob(this.vCard, this.encoding);\n    let filename = 'vCard';\n    if (this.vCard.name != null) {\n      filename =\n        this.vCard.name.firstNames + ' ' + this.vCard.name.lastNames + '.vcf';\n    }\n    this.download(blob, filename);\n  }\n\n  private download(data: Blob, filename: string) {\n    // IE 11\n    if (window.navigator.msSaveBlob) {\n      window.navigator.msSaveBlob(data, filename);\n    } else {\n      const a: HTMLAnchorElement = document.createElement('a');\n      const url = URL.createObjectURL(data);\n      (a as any).style.display = 'none';\n      a.href = url;\n      a.download = filename;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n    }\n  }\n\n  ngOnInit() {\n    if (\n      this.vCard == '' &&\n      (this.generateVCardFunction == '' ||\n        this.generateVCardFunction == undefined)\n    ) {\n      throw new Error(ERROR_MESSAGE);\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { DownloadVCardDirective } from './download-vcard.directive';\n\n@NgModule({\n  imports: [],\n  declarations: [DownloadVCardDirective],\n  exports: [DownloadVCardDirective]\n})\nexport class NgxVcardModule { }\n","/*\n * Public API Surface of ngx-vcard\n */\n\nexport * from './lib/ngx-vcard.module';\nexport * from './lib/ngx-vcard.formatter';\nexport * from './lib/download-vcard.directive';\nexport * from './lib/types/vCard';\nexport * from './lib/types/vCardEncoding';\nexport * from './lib/types/parameter/BasicPropertyParameters.type';\n\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["VCardEncoding","e","value","replace","nl","propertyToVCardString","property","str","language","altid","pid","map","s","join","type","Array","isArray","length","toLowerCase","mediatype","pref","calscale","sortas","geo","timezone","isPropertyWithParameters","object","test","param","undefined","isPropertyWithParametersAddressValue","VCardFormatter","getVCardAsBlob","vCard","encoding","none","data","getVCardAsString","Blob","encodingPrefix","version","majorVersion","getMajorVersion","formattedVCardString","formattedName","name","nameArray","firstNames","addtionalNames","lastNames","filter","string","namePrefix","nameSuffix","nickname","gender","sex","text","uid","birthday","YYYYMMDD","anniversary","forEach","organization","address","getFormattedAddress","telephone","element","email","title","logo","photo","homeFax","number","workFax","role","url","urlNotSet","hasProp","home","work","note","socialUrls","key","hasOwnProperty","source","rev","getFormattedPhoto","photoType","mediaType","base64","params","formattedPhoto","label","postOfficeBox","extendedAddress","street","locality","region","postalCode","countryName","date","toLocaleDateString","majorVersionString","slice","isNaN","Number","parseInt","obj","Object","prototype","call","ERROR_MESSAGE","DownloadVCardDirective","constructor","onclick","generateVCardFunction","Error","blob","filename","download","window","navigator","msSaveBlob","a","document","createElement","URL","createObjectURL","style","display","href","body","appendChild","click","removeChild","revokeObjectURL","ngOnInit","i0","Directive","selector","Input","HostListener","NgxVcardModule","NgModule","imports","declarations","exports"],"sourceRoot":"webpack:///"}