"use strict";(self.webpackChunkebc=self.webpackChunkebc||[]).push([[459],{6459:(Y,c,o)=>{o.r(c),o.d(c,{BusinessUnitProfileModule:()=>w,routes:()=>p});var d=o(9808),f=o(5861),h=o(655),r=o(3075),C=o(9010),n=o(5e3),v=o(2290),P=o(669),O=o(4590),M=o(5842),b=o(9581),l=o(4100),m=o(7322),Z=o(4107),x=o(9855),U=o(7531),_=o(1475),A=o(7423),T=o(508);function B(i,e){if(1&i&&(n.TgZ(0,"mat-option",29),n._uU(1),n.qZA()),2&i){const t=e.$implicit;n.Q6J("value",null==t?null:t.id),n.xp6(1),n.hij(" ",null==t?null:t.name," ")}}function y(i,e){if(1&i&&(n.TgZ(0,"mat-error"),n._uU(1),n.qZA()),2&i){const t=n.oxw();n.xp6(1),n.Oqu(null==t.formErrors?null:t.formErrors.code)}}function E(i,e){if(1&i&&(n.TgZ(0,"mat-option",29),n._uU(1),n.qZA()),2&i){const t=e.$implicit;n.Q6J("value",null==t?null:t.id),n.xp6(1),n.hij(" ",null==t?null:t.addressName," ")}}function I(i,e){if(1&i&&(n.TgZ(0,"mat-error"),n._uU(1),n.qZA()),2&i){const t=n.oxw();n.xp6(1),n.Oqu(null==t.formErrors?null:t.formErrors.addressId)}}let a=class{constructor(e,t,s,g,S,L,J){this.location=e,this.toastrService=t,this.fb=s,this.businessUnitService=g,this.dataService=S,this.commonService=L,this.addressService=J,this.loadingState=!1,this.showLoader=!1,this.formErrors={code:null,addressId:null,apierror:null},this.isEditing=!0,this.addressListArray=[],this.buListArray=[],this.selectedBUID="",this.addForm=this.fb.group({name:[null,r.kI.compose([r.kI.required])],code:[null,r.kI.compose([r.kI.required])],addressId:[null,r.kI.compose([r.kI.required])],csvTemplate:[""],activeTemplateId:[null]}),this.dataService.currentUser.subscribe(u=>{u&&(this.currentUser=u,this.getBUData())})}ngOnInit(){this.getAddressList()}getBUData(){let e=[];this.currentUser.businessUnitIds.map(s=>{e.push({propertyName:"Code",value:s,caseSensitive:!0})}),this.businessUnitService.getBusinessUnitList({searchFilter:{conditionOperator:1,filters:e},page:1,pageSize:0,fields:null}).subscribe(s=>{s&&(this.buListArray=s.data,this.buListArray.length>0&&(this.selectedBUID=this.buListArray[0].id,this.selectedBU=this.buListArray[0],this.onBUChange()))})}getAddressList(){this.addressService.getAddressList({fields:null,page:1,pageSize:0}).subscribe(t=>{this.loadingState=!1,t.data&&(this.addressListArray=t.data)})}onAddressChange(){this.addForm.value.addressId&&this.addForm.value.addressId.length>2?(this.addForm.controls.addressId.setErrors({isMax:!0}),this.formErrors.addressId="Please Select any two address"):(this.addForm.controls.addressId.setValidators([r.kI.required]),this.formErrors.addressId=!1),this.addForm.get("addressId").updateValueAndValidity()}onCheckCodeExist(){this.businessUnitService.checkCodeExists(this.addForm.value.code).subscribe(e=>{"Exist"==e.message?(this.addForm.controls.code.setErrors({isExit:!0}),this.formErrors.code="Business unit code already exit"):(this.addForm.controls.code.setErrors(null),this.formErrors.code=!1)})}submitForm(){var e=this;return(0,f.Z)(function*(){e.selectedBUID?e.addForm.valid&&(e.showLoader=!0,e.isEditing?e.businessUnitService.saveBusinessUnit(Object.assign(Object.assign({},e.addForm.value),{id:e.selectedBU.id})).subscribe(t=>{e.showLoader=!1,t&&e.location.back()},t=>{e.showLoader=!1}):e.showLoader=!1):e.toastrService.error("Please select Business unit")})()}onBUChange(){console.log(this.selectedBUID),this.buListArray.map(e=>{this.selectedBUID==e.id&&(this.selectedBU=e,this.addForm.patchValue(this.selectedBU))})}ngOnDestroy(){}};a.\u0275fac=function(e){return new(e||a)(n.Y36(d.Ye),n.Y36(v._W),n.Y36(r.qu),n.Y36(P.T),n.Y36(O.D),n.Y36(M.v),n.Y36(b.D))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-business-unit-edit-profile"]],decls:58,vars:12,consts:[[1,"side_container"],[1,"container-fluid"],[1,"main-page"],[1,"row","0"],[1,"col","add-brdcmb"],["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/dashboard"],["routerLink","/business-unit","aria-current","page",1,"breadcrumb-item","active"],["aria-current","page",1,"breadcrumb-item","active"],[1,"main-div","padding-x"],[1,"d-flex","justify-content-between"],[1,"form-hadding"],[1,"form-group","w-45","input-fildcl"],["for","lname",1,"control-label"],[1,""],["appearance","outline",1,"w-100"],["placeholder","Select Business Unit",3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"pt-5","row","justify-content-between",3,"formGroup","ngSubmit"],[1,"inpu-t"],["matInput","","placeholder","Ex : Human Resource",3,"formControl"],[1,"disable"],["matInput","","placeholder","Ex : code",3,"readonly","formControl","input"],[4,"ngIf"],["multiple","","placeholder","Select Address",3,"formControl","selectionChange"],[1,"d-flex","justify-content-center","margin-y"],["type","submit","mat-raised-button","","color","primary"],[3,"value"]],template:function(e,t){1&e&&(n.TgZ(0,"section",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"div",4),n.TgZ(5,"nav",5),n.TgZ(6,"ol",6),n.TgZ(7,"li",7),n.TgZ(8,"a",8),n._uU(9,"Home"),n.qZA(),n.qZA(),n.TgZ(10,"li",9),n._uU(11,"Business Unit"),n.qZA(),n.TgZ(12,"li",10),n._uU(13),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(14,"div",11),n.TgZ(15,"div",12),n.TgZ(16,"h3",13),n._uU(17),n.qZA(),n.qZA(),n.TgZ(18,"div",14),n.TgZ(19,"label",15),n._uU(20,"Business Unit "),n.TgZ(21,"em"),n._uU(22,"*"),n.qZA(),n.qZA(),n.TgZ(23,"div",16),n.TgZ(24,"mat-form-field",17),n.TgZ(25,"mat-select",18),n.NdJ("ngModelChange",function(g){return t.selectedBUID=g})("selectionChange",function(){return t.onBUChange()}),n.YNc(26,B,2,2,"mat-option",19),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.TgZ(27,"form",20),n.NdJ("ngSubmit",function(){return t.submitForm()}),n.TgZ(28,"div",14),n.TgZ(29,"label",15),n._uU(30,"Business Unit Name "),n.TgZ(31,"em"),n._uU(32,"*"),n.qZA(),n.qZA(),n.TgZ(33,"div",21),n.TgZ(34,"mat-form-field",17),n._UZ(35,"input",22),n.qZA(),n.qZA(),n.qZA(),n.TgZ(36,"div",14),n.TgZ(37,"label",15),n._uU(38,"Business Unit Code "),n.TgZ(39,"em"),n._uU(40,"*"),n.qZA(),n.qZA(),n.TgZ(41,"div",23),n.TgZ(42,"mat-form-field",17),n.TgZ(43,"input",24),n.NdJ("input",function(){return t.onCheckCodeExist()}),n.qZA(),n.qZA(),n.YNc(44,y,2,1,"mat-error",25),n.qZA(),n.qZA(),n.TgZ(45,"div",14),n.TgZ(46,"label",15),n._uU(47,"Address "),n.TgZ(48,"em"),n._uU(49,"*"),n.qZA(),n.qZA(),n.TgZ(50,"div",16),n.TgZ(51,"mat-form-field",17),n.TgZ(52,"mat-select",26),n.NdJ("selectionChange",function(){return t.onAddressChange()}),n.YNc(53,E,2,2,"mat-option",19),n.qZA(),n.qZA(),n.YNc(54,I,2,1,"mat-error",25),n.qZA(),n.qZA(),n.TgZ(55,"div",27),n.TgZ(56,"button",28),n._uU(57,"Save"),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&e&&(n.xp6(13),n.hij(" ",t.isEditing?"Update":"Add"," BU"),n.xp6(4),n.hij("",t.isEditing?"Update":"Add"," Business Unit"),n.xp6(8),n.Q6J("ngModel",t.selectedBUID),n.xp6(1),n.Q6J("ngForOf",t.buListArray),n.xp6(1),n.Q6J("formGroup",t.addForm),n.xp6(8),n.Q6J("formControl",t.addForm.controls.name),n.xp6(8),n.Q6J("readonly",t.isEditing)("formControl",t.addForm.controls.code),n.xp6(1),n.Q6J("ngIf",null==t.formErrors?null:t.formErrors.code),n.xp6(8),n.Q6J("formControl",t.addForm.controls.addressId),n.xp6(1),n.Q6J("ngForOf",t.addressListArray),n.xp6(1),n.Q6J("ngIf",null==t.formErrors?null:t.formErrors.addressId))},directives:[l.yS,l.rH,m.KE,Z.gD,r.JJ,r.On,d.sg,r._Y,r.JL,x.Y,r.sg,U.Nt,r.Fj,r.oH,_.k,d.O5,A.lW,T.ey,m.TO],styles:['.mat-option:before,   .mat-select:before{position:absolute;width:20px;height:10px;left:120px;content:""}.main-page[_ngcontent-%COMP%]{background-color:var(--color-light-blue);border-radius:1.5rem;padding:1rem 2rem}.main-page[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .main-page[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:var(--color-secondary);font-weight:500;font-size:14px;line-height:21px;letter-spacing:.5px}.main-page[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]{background-color:var(--white);border-radius:1rem;padding:20px;box-shadow:0 4px 21px #1a58f62b}.main-page[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .form-hadding[_ngcontent-%COMP%]{color:var(--color-secondary);font-weight:600;font-size:22px}.main-page[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .imageoverlap[_ngcontent-%COMP%]     .mat-form-field-appearance-outline .mat-form-field-flex{padding-right:40px}.main-page[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .dashed-line[_ngcontent-%COMP%]{border-bottom:2px dashed #ccc;width:35%;margin-right:15px;margin-left:15px;height:26px}.main-page[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .margin-y[_ngcontent-%COMP%]{margin-top:2rem;margin-bottom:2rem}.main-page[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .image-icon[_ngcontent-%COMP%]{margin-top:-4px;width:25px}.main-page[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .eye-icon[_ngcontent-%COMP%], .main-page[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{position:absolute;right:-28px;top:11px}.main-page[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .disable[_ngcontent-%COMP%]   .cdk-text-field-autofill-monitored[_ngcontent-%COMP%]:not(:-webkit-autofill){color:var(--color-gray);font-size:14px}.main-page[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .disable[_ngcontent-%COMP%]     .mat-form-field-outline{background-color:var(--color-light-gray);border-radius:4px}.main-page[_ngcontent-%COMP%]   .padding-x[_ngcontent-%COMP%]{padding-left:8rem;padding-right:8rem;padding-top:4rem}.main-page[_ngcontent-%COMP%]   .padding-x[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .w-45[_ngcontent-%COMP%]{width:45%;margin-bottom:5px}.main-page[_ngcontent-%COMP%]   .padding-x[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--color-secondary);font-weight:500;font-size:16px}.main-page[_ngcontent-%COMP%]   .padding-x[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .mat-raised-button[_ngcontent-%COMP%]{width:200px;height:48px;box-shadow:0 4px 21px #1a58f67d;border-radius:10px;margin-left:15px;background-color:var(--color-primary)}@media (max-width: 1199.98px){.side_container[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{padding-right:0;padding-left:0}.main-page[_ngcontent-%COMP%]   form.pt-5.row.justify-content-between.ng-untouched.ng-pristine.ng-invalid[_ngcontent-%COMP%]{padding-top:15px!important}.main-page[_ngcontent-%COMP%]   .padding-x[_ngcontent-%COMP%]{padding-left:2rem;padding-right:2rem;padding-top:30px!important}}.division[_ngcontent-%COMP%]{margin-top:15px}.division[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--color-secondary);font-weight:500;font-size:16px}.division[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:8px}@media (max-width: 530px){.main-page[_ngcontent-%COMP%]{background-color:var(--white);border-radius:1rem;padding:20px;box-shadow:0 4px 21px #1a58f62b}.main-page[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]{padding:0 10px!important;background-color:transparent;border-radius:0;box-shadow:none}.main-page[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   form.pt-5.row.justify-content-between.ng-untouched.ng-pristine.ng-invalid[_ngcontent-%COMP%]{padding-top:15px!important}.main-page[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]   .form-hadding[_ngcontent-%COMP%]{color:var(--color-secondary);font-weight:500;font-size:20px}.main-page[_ngcontent-%COMP%]   .padding-x[_ngcontent-%COMP%]{padding-left:15px;padding-right:inherit}.main-page[_ngcontent-%COMP%]   .padding-x[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .w-45[_ngcontent-%COMP%]{width:100%;margin-bottom:10px}.main-page[_ngcontent-%COMP%]   .padding-x[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--color-secondary);font-weight:500;font-size:16px}.main-page[_ngcontent-%COMP%]   .padding-x[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .mat-raised-button[_ngcontent-%COMP%]{width:250px;height:48px;box-shadow:0 4px 21px #1a58f67d;border-radius:10px;margin-left:5px;background-color:var(--color-primary)}}']}),a=(0,h.gn)([(0,C.k)()],a);var q=o(3153),F=o(977);const p=[{path:"",component:a}];let w=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[d.ez,l.Bz.forChild(p),F.b,r.u5,r.UX,q.Y]]}),i})()}}]);