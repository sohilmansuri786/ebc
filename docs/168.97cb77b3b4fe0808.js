"use strict";(self.webpackChunkebc=self.webpackChunkebc||[]).push([[168],{9168:(J,m,o)=>{o.r(m),o.d(m,{LoginModule:()=>U});var d=o(9808),u=o(655),r=o(3075),p=o(3118),f=o(9010),C=o(9937),t=o(5e3),l=o(4100),h=o(892),x=o(2290),O=o(4590),v=o(8444),P=o(8966),Z=o(9855),M=o(7322),_=o(7531),A=o(1475),b=o(5245),T=o(1062);function L(i,e){if(1&i&&(t.TgZ(0,"div",14),t.TgZ(1,"label",18),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"mat-form-field",16),t._UZ(5,"input",30),t.qZA(),t.qZA()),2&i){const n=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,2,"LOGIN.TALENTCODE")," "),t.xp6(3),t.Q6J("formControl",n.loginForm.controls.tenantCode)}}function y(i,e){1&i&&(t.TgZ(0,"div",31),t.TgZ(1,"label",32),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.qZA()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"LOGIN.CAPTCHA")))}function w(i,e){if(1&i){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",14),t.TgZ(2,"span",33),t._uU(3),t.qZA(),t.TgZ(4,"span",34),t.NdJ("click",function(){return t.CHM(n),t.oxw().createCaptcha()}),t.TgZ(5,"mat-icon"),t._uU(6,"cached"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(7,"div",14),t.TgZ(8,"mat-form-field",16),t._UZ(9,"input",35),t.ALo(10,"translate"),t.qZA(),t.qZA(),t.BQk()}if(2&i){const n=t.oxw();t.xp6(3),t.Oqu(null==n.loginForm.controls.captcha?null:n.loginForm.controls.captcha.value),t.xp6(6),t.s9C("placeholder",t.lcZ(10,3,"LOGIN.CAPTCHAPLACEHOLDER")),t.Q6J("formControl",n.loginForm.controls.reCaptcha)}}let a=class{constructor(e,n,c,s,g,S,N,R){this.router=e,this.activatedRoute=n,this.authService=c,this.fBuilder=s,this.toastr=g,this.dataService=S,this.tenantService=N,this.dialog=R,this.formErrors={apierror:null},this.showLoader=!1,this.loginType="email",this.captchaValue="",this.isAdmin=!1,this.loginForm=this.fBuilder.group({emailId:[null,r.kI.compose([r.kI.required,p.l3])],password:[null,r.kI.compose([r.kI.required])],tenantCode:[null,r.kI.compose([r.kI.required])],captcha:[null,r.kI.compose([r.kI.required])],reCaptcha:[""]}),this.activatedRoute.snapshot.queryParams&&this.activatedRoute.snapshot.queryParams.isAdmin?(this.isAdmin=this.activatedRoute.snapshot.queryParams.isAdmin,this.loginForm.patchValue({tenantCode:"EBC"})):this.isAdmin=!1}ngOnInit(){this.createCaptcha()}changeLoginType(e){this.loginType=e}getLoginType(e){this.loginType=e}submitForm(){if(this.formErrors.apierror&&this.loginForm.controls.captcha.value!==this.loginForm.controls.reCaptcha.value)return this.createCaptcha(),void this.toastr.error("Please enter a valid captcha!!");this.loginForm.valid&&(this.showLoader=!0,this.authService.login({emailId:this.loginForm.value.emailId,password:this.loginForm.value.password,tenantCode:this.loginForm.value.tenantCode}).subscribe(n=>{if(this.showLoader=!1,n)if(n.permissions&&n.permissions.length){this.dataService.setAuth(n),n.tenantCode&&this.getTenantDetails(n.tenantCode),setTimeout(()=>{p.op.resetForm(this.loginForm)},5e3),this.activatedRoute.snapshot.queryParamMap.get("next");const c=this.activatedRoute.snapshot.queryParamMap.get("next")?this.activatedRoute.snapshot.queryParamMap.get("next"):"/dashboard";this.router.navigateByUrl("End User"==n.userType?"/my-cards":c),n.user.isFirstTimeLogin&&this.dialog.open(C.T,{disableClose:!0,data:n,panelClass:"delete-popup"}).afterClosed().subscribe(g=>{})}else this.toastr.warning("please contact to administration.","Permission Denied");else this.formErrors.apierror=`* ${n.error[0]}`},n=>{this.createCaptcha(),this.toastr.error(n.error.message),this.formErrors.apierror=n.error.message,this.showLoader=!1,this.loginForm.get("reCaptcha").setValidators(r.kI.compose([r.kI.required])),this.loginForm.get("reCaptcha").updateValueAndValidity()}))}removeError(){this.formErrors.apierror=null}createCaptcha(){let e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=n.length;for(let s=0;s<6;s++)e+=n.charAt(Math.floor(Math.random()*c));this.captchaValue=e,this.loginForm.controls.captcha.setValue(e),this.loginForm.controls.reCaptcha.setValue("")}getTenantDetails(e){this.tenantService.getTenantByCodeEndUser({code:e}).subscribe(n=>{n&&n.data&&this.dataService.currentTenantSubject.next(n)})}ngOnDestroy(){}};a.\u0275fac=function(e){return new(e||a)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(h.e),t.Y36(r.qu),t.Y36(x._W),t.Y36(O.D),t.Y36(v.a),t.Y36(P.uw))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-login"]],decls:45,vars:28,consts:[[1,"wrapper"],[1,"main_container"],[1,"container"],[1,"row","main_row"],[1,"col-lg-6","col-md-12"],[1,"form_container"],[1,"header"],[1,"logo"],["src","assets/images/logo.svg",1,"img-fluid"],[1,"heading"],[1,"title"],[3,"formGroup","ngSubmit"],[1,"form-group","paddingLabel","required"],["class","text_field",4,"ngIf"],[1,"text_field"],["for","email_id"],["appearance","outline",1,"w-100","h-60"],["autocomplete","new-password","type","email","matInput","",3,"formControl","placeholder"],["for","password"],["autocomplete","new-password","type","password","matInput","",3,"formControl","placeholder"],[1,"remember_me"],[1,"form-group"],[1,"form-check","form-check-inline","mr-0"],["routerLink","/forgot-password",1,"forgot_password"],["class","text_field captcha_style",4,"ngIf"],[4,"ngIf"],[1,"button_submit"],["type","submit",1,"loginbutton",3,"disabled"],[1,"right_bg"],["src","assets/images/login/authmodule_login_charimage.svg",1,"img-fluid","img1"],["autocomplete","new-password","type","text","matInput","",3,"formControl"],[1,"text_field","captcha_style"],["for","Captcha"],[1,"captcha"],[1,"captchabutton","m-3",3,"click"],["type","Captcha","matInput","",3,"formControl","placeholder"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"div",4),t.TgZ(5,"div",5),t.TgZ(6,"div",6),t.TgZ(7,"div",7),t._UZ(8,"img",8),t.qZA(),t.TgZ(9,"div",9),t.TgZ(10,"h1",10),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"form",11),t.NdJ("ngSubmit",function(){return n.submitForm()}),t.TgZ(14,"div",12),t.YNc(15,L,6,4,"div",13),t.TgZ(16,"div",14),t.TgZ(17,"label",15),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"mat-form-field",16),t._UZ(21,"input",17),t.ALo(22,"translate"),t.qZA(),t.qZA(),t.TgZ(23,"div",14),t.TgZ(24,"label",18),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"mat-form-field",16),t._UZ(28,"input",19),t.ALo(29,"translate"),t.qZA(),t.qZA(),t.TgZ(30,"div",20),t.TgZ(31,"div",21),t._UZ(32,"div",22),t.TgZ(33,"a",23),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.qZA(),t.qZA(),t.YNc(36,y,4,3,"div",24),t.YNc(37,w,11,5,"ng-container",25),t.TgZ(38,"div",26),t.TgZ(39,"button",27),t._uU(40),t.ALo(41,"translate"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(42,"div",4),t.TgZ(43,"div",28),t._UZ(44,"img",29),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(11),t.hij(" ",t.lcZ(12,14,"LOGIN.TITLE")," "),t.xp6(2),t.Q6J("formGroup",n.loginForm),t.xp6(2),t.Q6J("ngIf",!n.isAdmin),t.xp6(3),t.Oqu(t.lcZ(19,16,"LOGIN.EMAIL")),t.xp6(3),t.s9C("placeholder",t.lcZ(22,18,"LOGIN.EMAILPLACEHOLDER")),t.Q6J("formControl",n.loginForm.controls.emailId),t.xp6(4),t.Oqu(t.lcZ(26,20,"LOGIN.PASSWORD")),t.xp6(3),t.s9C("placeholder",t.lcZ(29,22,"LOGIN.PASSWORDPLACEHOLDER")),t.Q6J("formControl",n.loginForm.controls.password),t.xp6(6),t.Oqu(t.lcZ(35,24,"LOGIN.FORGOTPASSWORD")),t.xp6(2),t.Q6J("ngIf",null==n.formErrors?null:n.formErrors.apierror),t.xp6(1),t.Q6J("ngIf",null==n.formErrors?null:n.formErrors.apierror),t.xp6(2),t.Q6J("disabled",n.showLoader),t.xp6(1),t.hij(" ",t.lcZ(41,26,"LOGIN.LOG_IN")," "))},directives:[r._Y,r.JL,Z.Y,r.sg,d.O5,M.KE,_.Nt,r.Fj,r.JJ,r.oH,A.k,l.yS,b.Hw],pipes:[T.X$],styles:['.wrapper[_ngcontent-%COMP%]{position:relative}.main_container[_ngcontent-%COMP%]{width:90%;margin:0 auto}.main_container[_ngcontent-%COMP%]   .main_row[_ngcontent-%COMP%]{height:100vh;align-items:center}@media (max-width: 768px){.main_container[_ngcontent-%COMP%]   .main_row[_ngcontent-%COMP%]{height:100%;flex-direction:column-reverse;flex-wrap:unset}}@media (max-width: 575px){.main_container[_ngcontent-%COMP%]   .main_row[_ngcontent-%COMP%]{height:100%;flex-direction:column-reverse;flex-wrap:unset}}.form_container[_ngcontent-%COMP%]{max-width:400px;margin:0 auto;text-align:center;padding:10px 0}@media (max-width: 768px){.form_container[_ngcontent-%COMP%]{max-width:400px;margin:50px auto}}@media (max-width: 575px){.form_container[_ngcontent-%COMP%]{max-width:100%}}.form_container[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{margin-top:40px}@media (max-width: 575px){.form_container[_ngcontent-%COMP%]   .heading[_ngcontent-%COMP%]{margin-top:27px}}.form_container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:50px}@media (max-width: 575px){.form_container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:30px}}.form_container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .text_field[_ngcontent-%COMP%]{text-align:left}.form_container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .text_field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--color-secondary);font-weight:400;font-size:18px;line-height:27px}.heading[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:Poppins;font-style:normal;font-weight:600;font-size:30px;line-height:45px;color:var(--color-secondary);margin-bottom:0}.button_submit[_ngcontent-%COMP%]{margin-top:40px}.button_submit[_ngcontent-%COMP%]   .loginbutton[_ngcontent-%COMP%]{width:100%;padding:13px 0;font-weight:600;font-size:16px;line-height:24px;color:var(--white);background-color:var(--color-primary);border:none;border-radius:5px}.right_bg[_ngcontent-%COMP%]{background-image:url(authmodule_bg_frame.2c474bd34b3bb60a.svg);background-repeat:no-repeat;background-size:100% 100%;max-width:475px;padding:40px}@media (max-width: 768px){.right_bg[_ngcontent-%COMP%]{margin:50px auto 0}}@media (max-width: 576px){.right_bg[_ngcontent-%COMP%]{max-width:100%;display:none}}.right_bg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:19px}@media (max-width: 768px){.right_bg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}}@media (max-width: 576px){.right_bg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}}.rememberLabel[_ngcontent-%COMP%]{font-size:14px;line-height:21px;color:var(--color-secondary)}.forgot_password[_ngcontent-%COMP%]{font-weight:500;font-size:14px;line-height:21px;color:var(--color-primary);text-decoration:none}.remember_me[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.remember_me[_ngcontent-%COMP%]   .form-check-inline[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;padding-left:0}.remember_me[_ngcontent-%COMP%]   .form-check-inline[_ngcontent-%COMP%]   .checkbox-set[_ngcontent-%COMP%]{margin-left:5px}.remember_me[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{position:relative;padding-left:30px!important;cursor:pointer}.remember_me[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.remember_me[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]{background-color:var(--color-orange)}.remember_me[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked ~ .checkmark[_ngcontent-%COMP%]:after{display:block}.remember_me[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:20px;width:20px;background-color:var(--color-border-cards);border-radius:50%}.remember_me[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.remember_me[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{left:7px;top:4px;width:5px;height:10px;border:solid white;border-width:0 1px 1px 0;transform:rotate(45deg)}.captcha[_ngcontent-%COMP%]{letter-spacing:1em;font-weight:700;font-size:large}.captchabutton[_ngcontent-%COMP%]{background-color:var(--color-orange);color:var(--white);border:none;padding:5px;display:inline-flex;align-items:center;justify-content:center;border-radius:50%;cursor:pointer}.captcha_style[_ngcontent-%COMP%]{margin-top:20px}']}),a=(0,u.gn)([(0,f.k)()],a);var I=o(3153),q=o(4466),F=o(7416),E=o(977);const k=[{path:"",component:a,data:{title:"login"}}];let U=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[h.e],imports:[[d.ez,r.u5,r.UX,I.Y,q.m,E.b,F.L,l.Bz.forChild(k)]]}),i})()}}]);