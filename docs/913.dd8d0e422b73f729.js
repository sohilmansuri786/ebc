"use strict";(self.webpackChunkebc=self.webpackChunkebc||[]).push([[913],{5913:(U,p,a)=>{a.r(p),a.d(p,{EndUserModule:()=>w,routes:()=>h});var m=a(9808),b=a(5861),x=a(2340),n=a(5e3),O=a(4100),P=a(892),M=a(5429);function v(o,c){if(1&o&&(n.ynx(0),n.TgZ(1,"div",9),n._UZ(2,"div",10),n.TgZ(3,"div",11),n.TgZ(4,"div",12),n._UZ(5,"button",13),n.qZA(),n.qZA(),n.qZA(),n.BQk()),2&o){const t=n.oxw();n.xp6(5),n.Q6J("generateVCardFunction",t.generateVCardOnTheFly)}}function f(o,c){1&o&&(n.TgZ(0,"h1",14),n._uU(1,"Loading..."),n.qZA())}const h=[{path:"",component:(()=>{class o{constructor(t,e,r){this.activatedRoute=t,this.eRef=e,this.authService=r,this.loadingState=!0,this.qrcode="BEGIN:VCARDVERSION:3.0N:ASZ;Tajuddin;Shaik;;FN:Tajuddin Shaik ASZTEL;TYPE=VOICE:+918897007153TEL;TYPE=VOICE:+918897007153END:VCARD",this.generateVCardOnTheFly=()=>{var i,s,d,g,_,l,u,C;let y=`${null===(i=this.currentTenantAddress)||void 0===i?void 0:i.building} ${null===(s=this.currentTenantAddress)||void 0===s?void 0:s.street} ${null===(d=this.currentTenantAddress)||void 0===d?void 0:d.locality} ${null===(g=this.currentTenantAddress)||void 0===g?void 0:g.city} ${null===(_=this.currentTenantAddress)||void 0===_?void 0:_.state} ${null===(l=this.currentTenantAddress)||void 0===l?void 0:l.country}-${null===(u=this.currentTenantAddress)||void 0===u?void 0:u.postalcode}`;return this.activeUser?{version:"3.0",name:{firstNames:this.activeUser.firstName,lastNames:this.activeUser.lastName},organization:this.currentTenant.companyName,title:this.activeUser.designation,email:[this.activeUser.emailId],telephone:[{value:this.activeUser.primaryContact,param:{type:["work","voice"],value:"uri"}}],note:`${window.location.href}`,url:`${null===(C=this.currentTenant)||void 0===C?void 0:C.website} `,address:[{street:y}]}:{name:{firstNames:"NEC",lastNames:"NEC"}}},this.activatedRoute.snapshot.queryParams.tc&&this.activatedRoute.snapshot.queryParams.em&&(this.data={tenantCode:atob(this.activatedRoute.snapshot.queryParams.tc),emailId:atob(this.activatedRoute.snapshot.queryParams.em)})}ngOnInit(){this.authService.endUserLogin({tenantCode:this.data.tenantCode,emailId:this.data.emailId,password:"uoi"}).subscribe(t=>{this.endLoginUser=t,this.activeUser=t.user,this.getBUData(),this.getTenantDetails(this.data.tenantCode)})}getTenantDetails(t){this.authService.getTenantByCodeEndUser({code:t},{token:this.endLoginUser.jwtToken}).subscribe(e=>{e&&e.data&&(this.currentTenant=e.data),this.currentTenantAddress=e.miscData})}getBUData(){let t=[];this.activeUser.hasOwnProperty("businessUnitIds")&&"End User"==this.endLoginUser.userType?this.activeUser.businessUnitIds.map(e=>{t.push({propertyName:"Code",value:e,caseSensitive:!0})}):this.activeUser.hasOwnProperty("myBuCode")&&("Tenant Admin"==this.endLoginUser.userType||"BU Admin"==this.endLoginUser.userType)&&(t=[{propertyName:"Code",value:this.activeUser.myBuCode,caseSensitive:!0}]),this.authService.getBusinessUnitListEndUser({searchFilter:{conditionOperator:0,filters:t},page:1,pageSize:0,fields:null},{token:this.endLoginUser.jwtToken}).subscribe(e=>{e&&(this.buListArray=e.data,this.getTemplate())})}getTemplate(){this.authService.previewTemplateListEndUser({buId:this.buListArray[0].code,userEmailId:this.activeUser.emailId},{token:this.endLoginUser.jwtToken}).subscribe(t=>{this.loadingState=!1,t?(this.objectArray=t,this.setFrame()):this.objectArray=[]},t=>{this.loadingState=!1,this.objectArray=[]})}setFrame(){setTimeout(()=>{document.getElementById("endUsercardFrame").innerHTML=this.objectArray.data},1e3)}clickout(t){let e=t.target.outerHTML;e=String(e),"<"==e[0]&&"b"==e[1]&&"u"==e[2]&&"t"==e[3]&&"t"==e[4]&&"o"==e[5]&&"n"==e[6]&&(e.includes('id="save_contact"')&&document.getElementById("carddown").click(),e.includes('id="share_contact"')&&this.shareDialog())}shareDialog(){var t=this;return(0,b.Z)(function*(){const e=yield(yield fetch(t.objectArray.message)).blob(),r=new File([e],"fileName.png",{type:e.type});navigator.share({title:t.activeUser.firstName,text:"Scan this QR code. or \n Open the given below link.",files:[r],url:`${x.N.frontEndURL}end-user?tc=${btoa(t.endLoginUser.tenantCode)}&em=${btoa(t.endLoginUser.user.emailId)}`})})()}}return o.\u0275fac=function(t){return new(t||o)(n.Y36(O.gz),n.Y36(n.SBq),n.Y36(P.e))},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-end-user"]],hostBindings:function(t,e){1&t&&n.NdJ("click",function(i){return e.clickout(i)},!1,n.evT)},decls:11,vars:2,consts:[[1,"side_container"],[1,"container-fluid"],[1,"main-page"],[1,"cards_container"],[1,"d-flex","justify-content-center"],[1,"form-hadding"],[1,"card_container"],[4,"ngIf","ngIfElse"],["elseTemplate",""],[1,"card_item"],["id","endUsercardFrame"],[1,"btn_bottom"],[1,"btn_download"],["id","carddown","vcdDownloadVCard","",2,"display","none",3,"generateVCardFunction"],[1,"text-muted",2,"text-align","center"]],template:function(t,e){if(1&t&&(n.TgZ(0,"div",0),n.TgZ(1,"div",1),n.TgZ(2,"div",2),n.TgZ(3,"div",3),n.TgZ(4,"div",4),n.TgZ(5,"h2",5),n._uU(6,"Business Card"),n.qZA(),n.qZA(),n.TgZ(7,"div",6),n.YNc(8,v,6,1,"ng-container",7),n.YNc(9,f,2,0,"ng-template",null,8,n.W1O),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()),2&t){const r=n.MAs(10);n.xp6(8),n.Q6J("ngIf",e.activeUser)("ngIfElse",r)}},directives:[m.O5,M.Dx],styles:[".img-fluid[_ngcontent-%COMP%]{max-width:118%;height:auto}.main-page[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .main-page[_ngcontent-%COMP%]   .breadcrumb[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{color:var(--color-secondary);font-weight:500;font-size:14px;line-height:21px;letter-spacing:.5px}.main-page[_ngcontent-%COMP%]   .main-div[_ngcontent-%COMP%]{background-color:var(--white);border-radius:1rem;padding:20px;box-shadow:0 4px 21px #1a58f62b}.main-page[_ngcontent-%COMP%]   .w-30[_ngcontent-%COMP%]{width:18rem}.main-page[_ngcontent-%COMP%]   .admin-brdcmb[_ngcontent-%COMP%]{margin:15px 0}@media (max-width: 768px){.main-page[_ngcontent-%COMP%]   .admin-brdcmb[_ngcontent-%COMP%]{display:none}}.adbtn[_ngcontent-%COMP%]{text-align:right}.adbtn[_ngcontent-%COMP%]   .mat-raised-button[_ngcontent-%COMP%]{width:200px;height:48px;box-shadow:0 4px 21px #1a58f67d;border-radius:10px;margin-left:15px;background-color:var(--color-primary)}.adbtn[_ngcontent-%COMP%]   .mat-raised-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--white);text-decoration:none}.adbtn[_ngcontent-%COMP%]   .mat-stroked-button[_ngcontent-%COMP%]{height:48px;width:200px;border:2px solid var(--color-primary);border-radius:10px;margin-left:5px}.adbtn[_ngcontent-%COMP%]   .mat-stroked-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--color-primary);text-decoration:none}.cards_container[_ngcontent-%COMP%]{background-color:var(--white);padding:40px;margin-top:15px}@media (max-width: 768px){.cards_container[_ngcontent-%COMP%]{padding:20px}}@media (max-width: 576px){.cards_container[_ngcontent-%COMP%]{padding:0}}.cards_container[_ngcontent-%COMP%]   h2.form-hadding[_ngcontent-%COMP%]{font-weight:600;font-size:18px;line-height:27px;color:var(--color-secondary)}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]{background-color:var(--white);padding:20px;border-radius:10px;border:1px solid var(--color-border-cards);display:inline-block;overflow:auto}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]::-webkit-scrollbar{height:3px}@media (max-width: 576px){.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]{display:block}}@media (max-width: 576px){.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .flip_details[_ngcontent-%COMP%]{background-color:var(--color-cards);border-radius:10px;display:flex;align-items:center;min-height:170px;padding:20px}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .flip_details[_ngcontent-%COMP%]   .nec_img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px;transform:translate(50px,-50px)}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .card_nec_details[_ngcontent-%COMP%]{position:absolute;padding:60px 10px 10px 45px}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .profile_details[_ngcontent-%COMP%]   .profile_img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:170px;border-radius:50%}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .profile_details[_ngcontent-%COMP%]   .card_details[_ngcontent-%COMP%]{position:relative}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .profile_details[_ngcontent-%COMP%]   .card_details[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:0;margin-bottom:0}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .profile_details[_ngcontent-%COMP%]   .card_details[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px;color:var(--color-secondary);font-size:12px;line-height:15px}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .profile_details[_ngcontent-%COMP%]   .card_details[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{margin-bottom:6px;font-weight:500}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .profile_details[_ngcontent-%COMP%]   .card_details[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{margin-bottom:0}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .card_nec_status[_ngcontent-%COMP%]{margin-top:20px}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .status_nec[_ngcontent-%COMP%]{margin-top:20px;display:flex;align-items:center;justify-content:end}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .status_nec_button[_ngcontent-%COMP%]{display:flex;align-items:center}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .status_nec_button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:40px;width:47px;border-radius:10px;border:none}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .status_nec_button[_ngcontent-%COMP%]   button.btn_edit[_ngcontent-%COMP%]{background-color:var(--btn-color-green);margin-right:30px}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .status_nec_button[_ngcontent-%COMP%]   button.btn_ref[_ngcontent-%COMP%]{background-color:var(--color-orange-light);margin-right:30px}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .status_nec_button[_ngcontent-%COMP%]   button.btn_share[_ngcontent-%COMP%]{background-color:var(--color-light-pink)}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .cards_status[_ngcontent-%COMP%]{margin-top:20px}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .cards_status[_ngcontent-%COMP%]   .date-cr[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .cards_status[_ngcontent-%COMP%]   .date-cr[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;color:var(--color-secondary);font-size:14px;line-height:21px}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .cards_status[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{margin-top:20px;display:flex;align-items:center;justify-content:space-between}@media (max-width: 1199px){.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .cards_status[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .cards_status[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   .status_bg[_ngcontent-%COMP%]{display:flex;align-items:center}@media (max-width: 1199px){.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .cards_status[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   .status_bg[_ngcontent-%COMP%]{margin-bottom:15px}}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .cards_status[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   .status_bg[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--color-black-lgt);font-size:13px;line-height:19px}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .cards_status[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   .status_button[_ngcontent-%COMP%]{display:flex;align-items:center}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .cards_status[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   .status_button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:40px;width:47px;border-radius:10px;border:none}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .cards_status[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   .status_button[_ngcontent-%COMP%]   button.btn_edit[_ngcontent-%COMP%]{background-color:var(--btn-color-green);margin-right:30px}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .cards_status[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   .status_button[_ngcontent-%COMP%]   button.btn_ref[_ngcontent-%COMP%]{background-color:var(--color-orange-light);margin-right:30px}.cards_container[_ngcontent-%COMP%]   .card_column[_ngcontent-%COMP%]   .cards_status[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]   .status_button[_ngcontent-%COMP%]   button.btn_share[_ngcontent-%COMP%]{background-color:var(--color-light-pink)}.status_dropdown[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:5px;background:var(--btn-color-green);color:var(--color-green-dark);border-color:var(--btn-color-green);padding:6px 3px;margin-left:10px;font-weight:500;font-size:12px;-moz-appearance:none;-webkit-appearance:none}.status_dropdown[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::-ms-expand{display:none}.status_dropdown_green[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:5px;background:var(--btn-color-green);color:var(--color-green-dark);border-color:var(--btn-color-green);padding:6px 3px;margin-left:10px;font-weight:500;font-size:12px;-moz-appearance:none;-webkit-appearance:none}.status_dropdown_green[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::-ms-expand{display:none}.status_dropdown_red[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{border-radius:5px;background:pink;color:red;border-color:pink;padding:6px 3px;margin-left:10px;font-weight:500;font-size:12px;-moz-appearance:none;-webkit-appearance:none}.status_dropdown_red[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::-ms-expand{display:none}@media (max-width: 1199.98px){.side_container[_ngcontent-%COMP%]   .container-fluid[_ngcontent-%COMP%]{padding-right:0;padding-left:0}.adbtn[_ngcontent-%COMP%]   .mat-raised-button[_ngcontent-%COMP%], .adbtn[_ngcontent-%COMP%]   .mat-stroked-button[_ngcontent-%COMP%]{width:auto}}.card_item[_ngcontent-%COMP%]{max-width:335px;margin:0 auto}@media (max-width: 576px){.card_item[_ngcontent-%COMP%]{max-width:100%}}.btn_bottom[_ngcontent-%COMP%]{margin-top:50px}@media (max-width: 576px){.btn_bottom[_ngcontent-%COMP%]{margin-top:35px}}.btn_bottom[_ngcontent-%COMP%]   .btn_flip[_ngcontent-%COMP%], .btn_bottom[_ngcontent-%COMP%]   .btn_download[_ngcontent-%COMP%]{margin-bottom:25px}.btn_bottom[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;color:var(--white);width:160px;height:40px;display:flex;align-items:center;border-radius:5px;box-shadow:var(--color-box-shdow);margin:0 auto;padding:0 10px}.btn_bottom[_ngcontent-%COMP%]   .btn_flip[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--color-secondry-button);color:#fe9800;box-shadow:none}.btn_bottom[_ngcontent-%COMP%]   .btn_flip[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:22px}.btn_bottom[_ngcontent-%COMP%]   .btn_download[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--color-primary)}.btn_bottom[_ngcontent-%COMP%]   .btn_download[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:8px}"]}),o})()}];let w=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.oAB({type:o}),o.\u0275inj=n.cJS({providers:[P.e],imports:[[m.ez,M.IZ,O.Bz.forChild(h)]]}),o})()}}]);